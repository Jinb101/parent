demo.access("params",demo.getUrl()),demo.access("es6",demo_es6),demo.js(".app_foot .views").style({background:"url(./image/foot.png) no-repeat left/cover"}),demo.access("$vue",()=>{let t=()=>{let t='<div class="app_view_box" :id="ids" :class="{readonly:readonly}">\n            <div class="cover"></div>\n            <div class="header" v-if="title">{{title}}</div>\n            <div class="views"><slot /></div>\n        </div>';return{props:{title:{type:String,default:""},ids:{type:String,default:"view-1"},readonly:{type:Boolean,default:!1}},template:t,data:()=>({}),mounted(){this.title&&demo.js("#"+this.ids+" .header").style({background:"url(./image/header.png) no-repeat left/cover"})}}},e=()=>{let t='<div class="app_view_line">\n                <h3 v-if="title">{{title}}</h3>\n                <section v-for="(i,j) in list" :key="j+\'-s\'">\n                    <h4 v-if="i.title">{{i.title}}</h4>\n                    <div class="check flex fw" v-if="i.children && i.children.length">\n                        <div class="app_check_btn" @click="onActive(j,y)" :class="{active:x.active}" v-for="(x,y) in i.children" :key="y+\'-c-\'+j" :data-value="x.value">{{x.title}}</div>\n                        <div class="app_check_btn input" v-if="i.add && !readonly">\n                            <input type="text" placeholder="可输入" v-model="i.search" @input="onAdd($event,j)" @blur="onBlur">\n                        </div>\n                    </div>\n                </section>\n            </div>';return{props:{title:{type:String,default:""},item:{type:Array,default:()=>[]},readonly:{type:Boolean,default:!1}},template:t,data:()=>({list:[],timer:null,timer2:null,index:-1}),watch:{item:{handler(){this.init()},deep:!0},list:{handler(t){this.save(()=>{this.$emit("change",t)})},deep:!0}},methods:{save(t){this.timer2&&(clearTimeout(this.timer2),this.timer2=null),this.timer2=setTimeout(()=>{t(),clearTimeout(this.timer2),this.timer2=null},500)},onBlur(){this.$nextTick(()=>{if(this.index>=0){this.list[this.index].search="";let t=this.list[this.index].children.map(t=>(delete t.is_add,t));this.$set(this.list[this.index],"children",t)}})},onAdd(t,e){this.index=e,this.onEvent(()=>{let t=this.list[this.index].search,e=this.list[this.index].children.map(t=>(t.active=!1,t)),i=e.filter(t=>t.is_add);i.length?e=e.map(e=>(e.title=e.is_add?t:e.title,e.active=!!e.is_add,e)):e.push({is_add:!0,title:t,active:!0,value:e.length}),this.$set(this.list[this.index],"value",t),this.$set(this.list[this.index],"children",e)})},onEvent(t){this.timer&&(clearTimeout(this.timer),this.timer=null),this.timer=setTimeout(()=>{t(),clearTimeout(this.timer),this.timer=null},500)},onActive(t,e){let i=this.list[t],s=i.children[e].active;if(s)return 0;this.$set(this.list[t],"children",this.list[t].children.map(t=>(t.active=!1,t))),this.$set(this.list[t].children[e],"active",!0),this.$set(this.list[t],"value",this.list[t].children[e].title)},init(){this.list=[...this.item].map((t,e)=>{let i=t.value||t.children.length&&t.children[0].title||"",s=(t.children||[]).map((t,e)=>({title:t.title||"",active:i===t.title||!!t.active,value:t.value||e+"",old:!0}));return{index:e+1,title:t.title||"",children:s,add:!!t.add,value:i,search:""}})}},mounted(){this.init()}}},i=()=>{let t='<div class="app_hands"><div class="canvas">\n            <canvas\n                id="myCanvas"\n                ref="canvas"\n                :width="canvasWidth"\n                :height="canvasHeight"\n                @touchstart="touchStart"\n                @touchmove="touchMove"\n                @touchend="touchEnd"\n                @mousedown="mouseDown"\n                @mousemove="mouseMove"\n                @mouseup="mouseUp"\n            >\n                您的浏览器不支持 HTML5 canvas 标签。\n            </canvas>\n            </div>\n        </div>',e=demo.js("#app").rect();return{template:t,props:{type:{type:[String,Number],default:""}},data:()=>({canvasWidth:e.width,canvasHeight:e.height-90,canvasImg:"",ctx:null,stage_info:[],isDown:!1,points:[],startX:0,startY:0,canvas:null}),mounted(){this.init()},methods:{init(){this.canvas=this.$refs.canvas,this.ctx=this.canvas.getContext("2d"),this.ctx.fillStyle="rgba(255,255,255,0.9)",this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height),this.ctx.strokeStyle="#000",this.ctx.lineWidth=1,this.ctx.lineCap="round",this.stage_info=this.canvas.getBoundingClientRect(),setTimeout(()=>{this.stage_info=this.canvas.getBoundingClientRect()},1200)},mouseDown(t){let e=t||event;e.preventDefault(),this.isDown=!0;let i={x:e.offsetX,y:e.offsetY};this.startX=i.x,this.startY=i.y,this.ctx.beginPath(),this.ctx.moveTo(this.startX,this.startY),this.ctx.lineTo(i.x,i.y),this.ctx.stroke(),this.ctx.closePath(),this.points.push(i)},mouseMove(t){let e=t||event;if(e.preventDefault(),this.isDown){let t={x:e.offsetX,y:e.offsetY};this.ctx.beginPath(),this.ctx.moveTo(this.startX,this.startY),this.ctx.lineTo(t.x,t.y),this.ctx.stroke(),this.ctx.closePath(),this.startY=t.y,this.startX=t.x,this.points.push(t)}},mouseUp(t){let e=t||event;e.preventDefault();let i={x:t.offsetX,y:t.offsetY};this.ctx.beginPath(),this.ctx.moveTo(this.startX,this.startY),this.ctx.lineTo(i.x,i.y),this.ctx.stroke(),this.ctx.closePath(),this.points.push(i),this.points.push({x:-1,y:-1}),this.isDown=!1},touchStart(t){let e=t||event;if(e.preventDefault(),1===e.touches.length){let t={x:e.targetTouches[0].clientX-this.stage_info.left,y:e.targetTouches[0].clientY-this.stage_info.top};this.startX=t.x,this.startY=t.y,this.ctx.beginPath(),this.ctx.moveTo(this.startX,this.startY),this.ctx.lineTo(t.x,t.y),this.points.push(t)}},touchMove(t){let e=t||event;if(e.preventDefault(),1===e.touches.length){let t={x:e.targetTouches[0].clientX-this.stage_info.left,y:e.targetTouches[0].clientY-this.stage_info.top};this.ctx.moveTo(this.startX,this.startY),this.ctx.lineTo(t.x,t.y),this.ctx.stroke(),this.startX=t.x,this.startY=t.y,this.points.push(t)}},touchEnd(t){let e=t||event;if(e.preventDefault(),1===e.touches.length){let t={x:e.targetTouches[0].clientX-this.stage_info.left,y:e.targetTouches[0].clientY-this.stage_info.top};this.startX=t.x,this.startY=t.y,this.ctx.moveTo(this.startX,this.startY),this.ctx.lineTo(t.x,t.y),this.ctx.closePath(),this.points.push(t)}},routeGo(){this.$emit("on-close")},clear(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height),this.points=[]},commit(){this.canvasImg=this.canvas.toDataURL(),this.$emit("on-save",this.canvasImg,this.type)}}}};return{view:t,btn:e,hand:i}}),demo.font(750),demo.access("$json",()=>{let t=()=>{let t=[{title:"整体表现",item:[{list:[{children:[{title:"Excellent 优"},{title:"Good 好"},{title:"Pair 好"},{title:"Poor 再加油"}]}]}]},{title:"课程表现",item:[{title:"入园情绪",list:[{add:!0,children:[{title:"心情佳"},{title:"普通"},{title:"哭闹"},{title:"其他"}]}]},{title:"上课与活动情形",list:[{add:!0,title:"与教师互动情形：",children:[{title:"佳"},{title:"普通"},{title:"其他"}]},{add:!0,title:"学习情绪：",children:[{title:"佳"},{title:"普通"},{title:"其他"}]},{add:!0,title:"与其他幼生互动情形：",children:[{title:"佳"},{title:"普通"},{title:"其他"}]}]},{title:"生活常规",list:[{children:[{title:"优"},{title:"好"},{title:"可"},{title:"再加强"}]}]}]},{title:"生活状况",item:[{title:"用餐情况",list:[{title:"早餐胃口",add:!0,children:[{title:"佳"},{title:"可"},{title:"差"}]},{title:"午餐胃口",add:!0,children:[{title:"佳"},{title:"可"},{title:"差"}]},{title:"下午点心",add:!0,children:[{title:"佳"},{title:"可"},{title:"差"}]}]},{title:"午睡情况",list:[{add:!0,children:[{title:"很快入睡"},{title:"入睡时间长"},{title:"不肯睡"},{title:"其他"}]}]},{title:"生理状况",list:[{add:!0,children:[{title:"正常"},{title:"流鼻涕"},{title:"其他"}]}]},{title:"入厕情况",list:[{children:[{title:"正常"},{title:"尿湿异物丶床铺"},{title:"园内大便"}]}]}]},{title:"带回物品",item:[{list:[{add:!0,children:[{title:"通知单"},{title:"棉被/鞋子"},{title:"收据"},{title:"其他"}]}]}]},{title:"特殊叮嘱",type:"textarea",value:"",hand:"",label:"老师签字",sub:1,path:""},{title:"家长反馈",type:"textarea",value:"",hand:"",label:"家长签字",sub:2,path:""}];return"teacher"===demo.params.type&&t.splice(t.length-1,1),t=t.map(t=>(t.type||t.item.map(t=>(t.list=t.list.map(t=>(t.value=t.value||"",t)),t)),t)),t};return{theme1:t}}),demo.params.api&&demo.access("baseUrlApi",decodeURIComponent(demo.params.api)),demo.access("$api",()=>{let t=(t,e={},i)=>{demo.ajax(demo.baseUrlApi+t).post({access_token:demo.params.token,n_id:demo.params.id,...e},t=>{200===t.code?i&&i(t.data):vant.Toast(t.msg||"netWork Error")},"",{access_token:demo.params.token})},e=(t,e)=>{demo.ajax(demo.baseUrlApi+"com/nursery_common/uploadImage").upload({imgs:t,type:"img"},t=>{200===t.code?e&&e({pic:t.data.data,path:t.data.halfway}):2!==t.code&&vant.Toast(t.msg||"netWork Error")},"",{access_token:demo.params.token})},i=(e,i)=>{t("parents/take_notes/park_details",{record_date:e},t=>{i&&i(t)})},s=(e,i,s,a)=>{let l=demo.copy([...e]),n={record_date:i,content:JSON.stringify(l),parent_signature:"",park_records_id:s},h=l.filter(t=>!!t.type),o=demo.params.type,c=[];return c="teacher"===o?h.filter(t=>1===t.sub):h.filter(t=>2===t.sub),c.length?""===c[0].path?vant.Toast("请签字"):(n.parent_signature=c[0].path,void t("parents/take_notes/parent_signature",n,()=>{vant.Toast("录入成功"),a&&a()})):vant.Toast("数据错误")};return{detail:i,save:s,upload:e}});