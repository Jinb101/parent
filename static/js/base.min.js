class Demo{constructor(e,t){this.options=Object.assign({prefix:"demo",theme:"light",name:"demo",ajax:!0,scroll:!0,api:"",ajaxCookie:!1,debugger:!1,log:!0,plugins:[],ajaxTimeout:8e3,ajaxUploadTimeout:2e4,const:[]},e||{}),this.const("version","1.1.41"),this.$={dom:e=>e?document.querySelector(e):null,all(e){if(!e)return[];let t=document.querySelectorAll(e);return t.length>0?Array.from(t):[]},id:e=>e?document.getElementById(e):null,name(e){if(!e)return[];var t=document.getElementsByName(e);return t.length>0?Array.from(t):[]},tag(e){if(!e)return[];var t=document.getElementsByTagName(e);return t.length>0?Array.from(t):[]}},this._init(e=>{t&&t(e)})}js(e,t=1){var n=e,o=this;return t&&(n=this.$.dom(e)),n?{dom:function(){return n},html:function(e){if(!arguments.length)return n.innerHTML;let t=o.$obj(e,1);4!==t&&6!==t||(e=JSON.stringify(e)),n.innerHTML=e},text:function(e){if(!arguments.length)return n.innerText;n.innerText=e},brother:function(e=""){return e?n.parentNode.querySelector(e):n},addClass:function(e){if(4===o.$obj(e,1))return e.forEach(e=>{n.classList.add(e)}),1;n.classList.add(e)},removeClass:function(e){var t=n.className;if(4===o.$obj(e,1))return e.forEach(o=>{t.indexOf(o)>=0&&n.classList.remove(e)}),1;t.indexOf(e)>=0&&n.classList.remove(e)},toggleClass:function(e){var t=function(t){n.className.indexOf(t)>=0?n.classList.remove(e):n.classList.add(e)};if(4===o.$obj(e,1))return e.forEach(e=>{t(e)}),1;t(e)},append:function(e){if(!e)return 0;n.innerHTML+=e},appendChild:function(e){if(!e)return 0;n.appendChild(e)},remove:function(){n.parentNode.removeChild(n)},style:function(e,t){var r="";if(6===o.$obj(e,1))for(var i in e)r+=`${i}:${e[i]};`,t&&(n.style[i]=e[i]);else t=!1,r=e;t||n.setAttribute("style",r)},attr:function(e,t){if(6===o.$obj(e,1))return Object.keys(e).forEach(t=>{n.setAttribute("data-"+t,e[t])}),!0;if(4==o.$obj(e,1)){let t={};return e.forEach(e=>{t[e]=n.getAttribute("data-"+e)||""}),t}if(!(arguments.length>1))return n.getAttribute(e);n.setAttribute(e,t)},click:function(e,t){arguments.length>0?n.onclick=function(n){let r=this;t>0&&!isNaN(t)&&(r.setAttribute("disabled","true"),setTimeout(()=>{r.removeAttribute("disabled")},1e3*t)),o.focus(r),e(r,n),n.preventDefault(),o.stopBubble(n)}:n.click()},json:function(e){e=e||{},n.innerHTML=o.showJson(e)},width:function(e){if(!arguments.length)return n.clientWidth;n.style.width=isNaN(e)?e:e+"px"},height:function(e){if(!arguments.length)return n.clientHeight;n.style.height=isNaN(e)?e:e+"px"},square:function(e,t){if(!e)return{w:n.clientWidth,h:n.clientHeight};t||(t=e),o.js(n,0).width(e),o.js(n,0).height(t)},val:function(e){if(!arguments.length)return n.value;n.value=e},input:function(e){arguments.length&&(n.oninput=function(t){e(this,t)})},keydown:function(e){arguments.length&&(n.onkeydown=function(t){t=t||window.event;var o={event:t,code:t.keyCode,value:this.value,key:t.key,dom:n};e(o,this)})},find:function(e){var t=function(e){var t=[];return e.forEach(function(e){t.push({name:e.replace(/[.|#]/,""),dom:Array.from(n.querySelectorAll(e))})}),t};return 4===o.$obj(e,1)?t(e):arguments.length>1?t([e])[0].dom:n.querySelector(e)},video:function(e){for(var t in e=Object.assign({"x5-video-player-type":"h5","x5-video-player-fullscreen":"false"},e||{}),e)n.setAttribute(t,e[t])},index:function(){let e=0;do{e++}while(n=n.previousElementSibling);return e},offset:function(){let e=n.getBoundingClientRect(),t=document.body;return{top:e.top+t.scrollTop,left:e.left+t.scrollLeft,self:{top:e.top,left:e.left}}},replaceVal:function(e){e=e||/[^\u4e00-\u9fa5]/g;var t=t=>{let n=t.value;t.value=n.replace(new RegExp(e),"")};n.onfocus=(e=>{t(e.target)}),n.onkeyup=(e=>{t(e.target)}),n.onblur=(e=>{t(e.target)})},child:function(e){return Array.from(e?n.querySelectorAll(e):n.children)},bgc:function(e){let t=o.js(n,0).child("[data-background-list]");return t.length&&(e=e||"green|#18bc9c",t.forEach(t=>{let n=t.getAttribute("data-bgc")||e;n=n.split("|"),1===n.length&&(n[1]=n[0]),t.style.background=o.algorithm().gradients(1*(n[2]||90),n[0],n[1]||"")})),t},show:function(){let e=n.getAttribute("data-fade")||"hide";if("hide"===e){var t=0;n.style.display="",n.setAttribute("data-fade","show");var o=()=>{n.style.opacity=t>1?1:t,t+=Math.random()/10,t<1.001&&setTimeout(()=>{o()},50)};o()}return n},hide:function(){let e=n.getAttribute("data-fade")||"show";if("show"===e){var t=1,o=()=>{n.style.opacity=t<0?0:t,t-=Math.random()/10,t>-.001?setTimeout(()=>{o()},50):(n.style.display="none",n.setAttribute("data-fade","hide"))};o()}return n},toggle:function(){let e=n.getAttribute("data-fade")||"";return o.js(n,0)["show"===e?"hide":"show"]()},file:function(e,t,r){t=t||{};let i="file-"+o.rand(1e4,99999),a=demo._div("input","m_inp"),l=demo._div("label"),s=n.innerText;a.setAttribute("type","file"),a.setAttribute("id",i),t.more&&a.setAttribute("multiple",!0);let c="";switch(t.type){case"txt":c="text/plain";break;case"other":c=t.accept||"";break;default:c="image/*"}t.capture&&a.setAttribute("capture",t.capture),a.setAttribute("accept",c),l.setAttribute("for",i),l.setAttribute("style","display:block"),n.innerHTML="",n.appendChild(a),n.appendChild(l),l.innerHTML=s||"Upload",o.$.id(i)&&o.$.id(i).addEventListener("change",function(){let t={files:this.files,file:this.files[0],time:o.timeout(),id:i,el:n};t.file&&e&&e(t),r&&setTimeout(()=>{o.$.id(i).value=""},500)})},scrollbar:function(){n.clientHeight>n.parentNode.clientHeight&&n.parentNode.classList.add(o.options.prefix+"_scrollbar")},countTo:function(e,t,r){o.countTo(e,e=>{n.innerHTML=e},r,t)},styleObj:function(){return o.styleToObj(n.getAttribute("style"))}}:{}}loading(e){var t=Object.assign({theme:this.options.theme,dom:"body"},e||{}),n=this,o=n.options.prefix+"_loading",r=n.$.dom("."+o);if(r&&"body"===t.dom)return r.className=o+(""===t.theme?"":" "+t.theme),!1;var i=document.createElement("div");return i.setAttribute("class",o+(""===t.theme?"":" "+t.theme)),t.id&&i.setAttribute("id",n.options.prefix+"-"+t.id),"body"===t.dom?document.body.appendChild(i):(i.setAttribute("style","position:absolute"),n.$.dom(t.dom).appendChild(i)),i}alert(e,t,n,o){var r=Object.assign({title:"",timeout:2e3,screen:0,sty:"alert",btnSuccessText:"确定",btnErrorText:"取消",btnSuccessStyle:"",btnErrorStyle:""},n||{});t=t||0;var i=this,a=null,l=arguments.length>3;r.screen&&(a=i.loading({theme:i.options.theme+" model",id:"loading-"+i.rand(1e3,9999)}));var s=function(e,t){var n=arguments.length;e&&(e.classList.add("hidden"),setTimeout(function(){e&&(i.remove(e),e=null),a&&(i.remove(a),a=null),n>1&&t(),l&&o({code:1,type:"all",status:"remove",options:r.data||{}})},200))};if(t>99){var c=i.js("body").find("[id^='"+i.options.prefix+"-alert-']"),u=i.js("body").find('[id^="'+i.options.prefix+'-loading-"]');return c&&(u&&(a=u),s(c)),u=null,c=null,0}var d=i.options.prefix+"_model."+r.sty,f=i.$.dom("."+d);if(f)return s(f,function(){f=null,i.alert(e,t,n)}),!1;var h=document.createElement("div"),m=["error","success","warning","default"];t=t>=m.length?m.length-1:t,h.setAttribute("class",d.replace("."," ")+" hidden "+m[t]),h.setAttribute("id",i.options.prefix+"-alert-"+i.rand(1e3,9999)),6===i.$obj(e,1)&&(e=JSON.stringify(e));var p="",g="_"+i.rand(1e3,9999)+"-";r.title&&(p+='<h3 class="title">'+r.title+"</h3>"),p+='<i class="close"></i>',p+='<p class="msg">'+(void 0===e?"":e)+"</p>","alert"!==r.sty&&(p+='<div class="btn">',p+='<button class="m_btn '+r.btnSuccessStyle+'" id="'+g+'s">'+r.btnSuccessText+"</button>",p+='<button class="m_btn '+r.btnErrorStyle+'" id="'+g+'e">'+r.btnErrorText+"</button>",p+="</div>"),h.innerHTML=p,document.body.appendChild(h);var b=h.querySelector(".close"),v=h.querySelector("#"+g+"s"),y=h.querySelector("#"+g+"e");"alert"===r.sty&&l&&o({code:1,type:"alert",status:"create",options:r.data||{}}),b&&(b.onclick=function(e){s(h),i.stopBubble(e)}),l&&(o({code:3e3,box:h}),v&&i.js(v,0).click(function(){o({btn:"success",t:v,code:1,box:h,options:r.data||{}}),s(h)}),y&&i.js(y,0).click(function(){o({btn:"error",t:y,code:0,box:h,options:r.data||{}}),s(h)})),setTimeout(function(){h.classList.remove("hidden")},50),r.timeout>500&&i._timers("alert_timer",function(e){e&&s(h)},0,r.timeout)}rand(e,t){return e*=1,1===arguments.length?(e=e>9?9:e<1?1:e,t=1*("1e"+e)-1,e=1*("1e"+(e-1)),Math.floor(Math.random()*(t-e+1)+e)):!t&&arguments.length>1?Math.floor(Math.random()*e):(t*=1,Math.floor(Math.random()*(t-e+1)+e))}remove(e){return e&&e.parentNode&&(e.parentNode.removeChild(e),e=null),1}timeout(e,t,n){function o(e){return"星期"+["日","一","二","三","四","五","六"][e]}function r(e){return e<10?"0"+e:e}function i(e,t,n){return n?e.y+t+e.m:e.y+t+e.m+t+e.d}function a(e,t,n){return n?e.h+t+e.i:e.h+t+e.i+t+e.s}function l(e,t){return e.m+t+e.d}e&&!isNaN(e)||(e=Date.now()),e=parseInt(e),n=n||"/",(e+"").length>10&&(e=Math.floor(e/1e3));var s=new Date(1e3*e),c=s.getDay(),u={y:s.getFullYear(),m:s.getMonth()+1,d:s.getDate(),h:s.getHours(),i:s.getMinutes(),s:s.getSeconds(),ms:s.getMilliseconds(),default:e,w:o(c),week:c};c=null,s=null,e=null,u.m=r(u.m),u.d=r(u.d),u.h=r(u.h),u.i=r(u.i),u.s=r(u.s);var d="";switch(t){case"alls":d=i(u,n)+" "+a(u,":");break;case"ymd":d=i(u,n);break;case"md":d=l(u,n);break;case"his":d=a(u,n);break;case"array":d=[u.y,u.m,u.d,u.h,u.i,u.s,u.ms];break;case"object":d=u;break;case"zero":d=new Date(i(u,"/")+" 00:00:00").getTime();break;case"day":d=u.week;break;case"rotate":d={s:6*u.s,i:6*(u.i+u.s/60),h:30*(u.h%12+u.i/60)};break;default:d=i(u,n)+" "+a(u,":",1)}return d}local(){return this._storage("localStorage")}session(){return this._storage("sessionStorage")}getUrl(e){if(void 0===e)var t=decodeURI(location.search);else t="?"+e.split("?")[1];var n=new Object;if(-1!=t.indexOf("?"))for(var o=t.substr(1),r=o.split("&"),i=0;i<r.length;i++)n[r[i].split("=")[0]]=decodeURI(r[i].split("=")[1]||"");return n}getUrlParam(e,t){var n=window.location.search.substring(1);arguments.length>1&&(n=t.split("?")[1]);for(var o=decodeURI(n),r=o.split("&"),i=0;i<r.length;i++){var a=r[i].split("=");if(a[0]==e)return a[1]}return null}scroll(e,t){if(!this.$scroll)return!1;var n=new this.$scroll(e,Object.assign({scrollX:!1,scrollY:!0,bounce:!0,click:!0,mouseWheel:!0,probeType:1,scrollbar:!0,preventDefaultException:{tagName:/^(INPUT|TEXTAREA|BUTTON|SELECT|DIV|P)$/}},t||{}));return n}click(e,t){let n=this;if(3===n.$obj(e,1)&&(e=n.js(e).dom()),!(arguments.length>1))return e.click();if(e.length>=1)for(var o=0;o<e.length;o++){let r="data-tab-click-index";e[o].setAttribute(r,o),e[o].onclick=function(e){n.focus(this),t({index:1*this.getAttribute(r),e:e,dom:this}),n.stopBubble(e)}}else e.onclick=function(e){n.focus(this),t({index:0,e:e,dom:this}),n.stopBubble(e)}}class(e){3===this.$obj(e,1)&&(e=this.js(e).dom());var t=[];if(e.length>=1)for(var n=0;n<e.length;n++)t.push(e[n]);else t=[e];return{add(e){if(""===e||!e)return!1;t.forEach(function(t){t&&t.className.indexOf(e)<0&&t.classList.add(e)})},remove(e){if(""===e||!e)return!1;t.forEach(function(t){t&&t.className.indexOf(e)>=0&&t.classList.remove(e)})},name(e){t.forEach(function(t){t&&(t.className=e||"")})}}}ajax(e){var t=this;if(!window.Promise)return{};let n=e=>{let n="";return 6===t.$obj(e,1)?(Object.keys(e).forEach(t=>{n+=t+"="+e[t]+"&"}),n=n.substr(0,n.length-1)):n=e,n};e=e||"";let o=(n,o,r,i)=>t.copy(Object.assign({url:t.options.api+e,method:n,timeout:o||t.options.ajaxTimeout,headers:r,withCredentials:t.options.ajaxCookie},i));return{get(e,n,r,i){var a=t.copy(i||{});"json"===r&&(a["Content-Type"]="application/json"),6===t.$obj(r,1)&&(a=r);var l=arguments.length>1;t.$axios(o("get","",a,{params:e})).then(function(e){200===e.status&&l&&n(e.data)}).catch(function(e){l&&(e.response?n({code:0,data:e.response,err:e.response.data}):n({code:0,data:e,err:e.message}))})},post(e,n,r="",i){var a=arguments.length>1,l=t.copy(i||{});if("json"===r)l["Content-Type"]="application/json";else if("object"==typeof e){var s="";for(var c in e)s+=c+"="+e[c]+"&";e=s.substring(0,s.length-1)}6===t.$obj(r,1)&&(l=r),t.$axios(o("post","",l,{data:e})).then(function(e){200===e.status&&a&&n(e.data)}).catch(function(e){a&&(e.response?n({code:0,data:e.response,err:e.response.data}):n({code:0,data:e,err:e.message}))})},upload(n,o,r){var i=arguments.length>1,a=new FormData;if(6===t.$obj(n,1))for(let e in n)a.append(e,n[e]);else a=n;var l=t.copy(Object.assign({"Content-Type":"multipart/form-data;boundary="+Date.now()},r||{}));t.$axios({url:t.options.api+e,method:"post",timeout:t.options.ajaxUploadTimeout,headers:l,withCredentials:t.options.ajaxCookie,data:a,onUploadProgress:function(e){var t=parseInt(e.loaded/e.total*100)/100;o({code:2,type:"progress",progress:t})}}).then(function(e){200===e.status&&i&&o(e.data)}).catch(function(e){i&&(e.response?o({code:0,data:e.response,err:e.response.data}):o({code:0,data:e,err:e.message}))})},other(e,n,r,i,a){var l=t.copy(a||{});if("json"===i)l["Content-Type"]="application/json";else if("object"==typeof n){var s="";for(var c in n)s+=c+"="+n[c]+"&";n=s.substring(0,s.length-1)}6===t.$obj(i,1)&&(l=i);var u=arguments.length>1;t.$axios(o(e||"post","",l,{data:n})).then(function(e){200===e.status&&u&&r(e.data)}).catch(function(e){u&&(e.response?r({code:0,data:e.response,err:e.response.data}):r({code:0,data:e,err:e.message}))})},plain(o,r,i){let a=n(o),l=((i?"":t.options.api)+e).split("?")[0]+(a?"?"+a:"");var s=new XMLHttpRequest;s.open("GET",l,!0),s.onreadystatechange=function(){(4==s.readyState&&200==s.status||304==s.status)&&r.call(this,s.responseText)},s.send()},cipher(o,r,i){var a=new XMLHttpRequest;a.open("POST",(i?"":t.options.api)+e,!0),a.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),a.onreadystatechange=function(){4!=a.readyState||200!=a.status&&304!=a.status||r.call(this,a.responseText)},a.send(n(o))},up(e,n){let o=e=>{let t=new FormData;return Object.keys(e).forEach(function(n){t.append(n,e[n])}),t},r=e=>{const n=e.params||{};n[e.filename||"file"]=e.file;const r={url:e.url,method:"post",data:o(n)};return e.onUploadProgress&&(r.onUploadProgress=e.onUploadProgress),t.$axios(r)},i=async e=>{const t=1048576,n=Math.ceil(e.file.size/t),o=e.file.size,i=[];for(let a=0;a<n;a++){const n=a*t,l=a===t-1?o:(a+1)*t,s={...e};s.file=e.file.slice(n,l),e.onUploadProgress&&(s.onUploadProgress=(t=>{e.onUploadProgress({loaded:n+t.loaded,total:o})})),i.push(await r(s))}return i};n?r(e):i(e)}}}jsonp(e,t,n){function o(){return(Math.floor(1e5*Math.random())*Date.now()).toString(16)}function r(e,t){e=e.replace(/=/g,"");var n=[];switch(t.constructor){case String:case Number:case Boolean:n.push(encodeURIComponent(e)+"="+encodeURIComponent(t));break;case Array:t.forEach(function(t){n=n.concat(r(e+"[]=",t))});break;case Object:Object.keys(t).forEach(function(o){var i=t[o];n=n.concat(r(e+"["+o+"]",i))})}return n}function i(e){var t=[];return e.forEach(function(e){"string"==typeof e?t.push(e):t=t.concat(i(e))}),t}return t=t||{},n=n||this.jsonp_timeout,new Promise(function(a,l){function s(e){c(),clearTimeout(m),l({status:400,statusText:"Bad Request"})}function c(){g.removeEventListener("error",s)}if("string"!=typeof e)throw new Error('[jsonp] Type of param "url" is not string.');var u=t.callbackQuery||"callback",d=t.callbackName||"jsonp_"+o();t[u]=d,delete t.callbackQuery,delete t.callbackName;var f=[];Object.keys(t).forEach(function(e){f=f.concat(r(e,t[e]))});var h=i(f).join("&"),m=null;"number"==typeof n&&(m=setTimeout(function(){c(),p.removeChild(g),delete window[d],l({statusText:"Request Timeout",status:408})},n)),window[d]=function(e){clearTimeout(m),c(),p.removeChild(g),a(e),delete window[d]};var p=document.querySelector("head"),g=document.createElement("script");g.addEventListener("error",s),g.src=e+(/\?/.test(e)?"&":"?")+h,p.appendChild(g)})}platform(){var e=navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);if(e){var t=window.navigator.userAgent,n=(window.navigator.appVersion,t.indexOf("Android")>-1||t.indexOf("Linux")>-1),o=!!t.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/);if(n)return 1;if(o)return 2}var r=document.body.clientWidth;return r<750?1:0}touch(e,t){function n(n){if(n.preventDefault(),"touchstart"==n.type){var f=n.touches[0];o=Math.floor(f.pageX),r=Math.floor(f.pageY)}else if("touchmove"==n.type){f=n.touches[0];Math.floor(f.pageX),Math.floor(f.pageY)}else if("touchend"==n.type||"touchcancel"==n.type){i=Math.floor(n.changedTouches[0].pageX),a=Math.floor(n.changedTouches[0].pageY),l=i-o,s=a-r,c=180*Math.atan2(s,l)/Math.PI;var h={};Math.abs(l)<=1||Math.abs(s)<=1?h={code:0,text:"点击",dire:"click"}:c<45&&c>=-45?h={code:2,text:"右",dire:"right"}:c<135&&c>=45?h={code:3,text:"下",dire:"down"}:c<=180&&c>=135||c>=-180&&c<-135?h={code:4,text:"左",dire:"left"}:c<=-45&&c>=-135&&(h={code:1,text:"上",dire:"up"}),u=Object.assign(u,h),u.target=e,d>0&&t(u)}}"string"==typeof e&&(e=this.$.dom(e));var o,r,i,a,l,s,c,u={view:["pc","android","iphone"][this.$web],code:-1},d=arguments.length;if(!e||!this.$web)return d>1&&t(u),!1;e.addEventListener("touchstart",n,!1),e.addEventListener("touchmove",n,!1),e.addEventListener("touchend",n,!1)}showJson(e){return"string"!=typeof e&&(e=JSON.stringify(e,void 0,2)),e=e.replace(/&/g,"&").replace(/</g,"<").replace(/>/g,">"),e.replace(/("(\\u[a-zA-Z0-9]{4}|\\[^u]|[^\\"])*"(\s*:)?|\b(true|false|null)\b|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?)/g,function(e){var t="#ff9b26";return/^"/.test(e)?t=/:$/.test(e)?"#ff4c2f":"#67e66e":/true|false/.test(e)?t="#414fff":/null/.test(e)&&(t="#999"),'<span style="color:'+t+'">'+e+"</span>"})}resize(e,t,n){e=this.$.dom(e)||document.body;var o=arguments.length>1,r={w:e.clientWidth,h:e.clientHeight},i=this;e.onresize=function(){i._timers("resize_timer",function(n){if(n){var i={w:e.clientWidth,h:e.clientHeight};i.h!==r.h&&i.w!==r.w?i.dire="auto":i.w!==r.w?i.dire="width":i.dire="height",o&&t(i)}},0,n||800)}}eval(e,t){if(!t){let t="(function(){"+e+"})()";return this.fn(t)}var n=document.createElement("script");n.type="text/javascript",n.text=e,document.getElementsByTagName("head")[0].appendChild(n),document.head.removeChild(document.head.lastChild),n=null}fn(e){let t=new Function("return "+e)();return t}frame(e,t){function n(){s=null,c=null,i=null,u=null,d=null,f=null,h=null}e=Object.assign({dom:"body",type:"frame",theme:"shadow_right",title:"Title",header:!0,close:!0,scroll:!1,style:{},move:!1,moveDom:"",id:"frame-"+this.rand(1e3,9999)},e);var o=arguments.length>1,r=(e,t,n)=>({err:e,by:t,code:n||0}),i=r("dom is null","frame-dom"),a=this.$.dom(e.dom);if(!a)return o&&t(i),i;e.theme=e.theme?e.theme+(e.header?"":" auto"):e.header?"":"auto",e.style["z-index"]||(e.style["z-index"]=Math.ceil((Date.now()-new Date(this.timeout("","y/m/d")).getTime())/1e3));var l="";switch(l+=`<div class="${this.options.prefix}_frame${e.theme?" "+e.theme:""} hidden" data-frame id="${e.id}">`,e.header?(l+=`<header class="frame_header"><b>${e.title}</b>`,e.close&&(l+='<span class="close" data-frame-close>X</span>'),l+="</header>"):e.close&&(l+='<span class="close" data-frame-close>X</span>'),l+=`<div class="frame_main" id="${e.id}-main">`,e.type){case"frame":l+=`<iframe src="${e.src}" frameborder="0"></iframe>`;break;case"template":l+=`<div class="content" data-frame-content>${e.template}</div>`;break;default:l+='<div class="content" data-frame-content></div>'}if(l+="</div>",e.foot&&(l+=`<div class="frame_foot" id="${e.id}-foot"></div>`),l+="</div>","frame"===e.type&&!e.src)return i=r("frame src is null","frame-src"),o&&t(i),i;if("template"===e.type&&!e.template)return i=r("frame template is null","frame-template"),o&&t(i),i;a.innerHTML=l,l=null,i=r("frame create end","frame-create",1),o&&t(i);var s=a.querySelector("[data-frame]"),c=a.querySelector("[data-frame-close]"),u=a.querySelector("[data-frame-content]"),d=null,f=null,h=null;if(e.foot&&(f=a.querySelector(".frame_foot"),u.style["padding-bottom"]=f.clientHeight+"px"),e.header&&(h=a.querySelector(".frame_header")),e.style){var m="";for(var p in e.style)p&&(m+=`${p}:${e.style[p]};`);m&&s.setAttribute("style",m)}var g=this;if(s)return c&&(c.onclick=function(e){s.classList.add("hidden"),setTimeout(function(){g.remove(s),i=r("frame is delete","frame-delete",1),o&&t(i),n()},1e3),g.stopBubble(e)}),e.scroll&&u&&(d=g.scroll("#"+e.id+"-main"),i=r("frame scroll is create success","frame-scroll",1),o&&t(i)),e.move&&g.move(s,function(t){t.code?g.js(s,0).style(Object.assign({left:t.left,top:t.top,margin:"0",bottom:"auto",right:"auto",transition:"all 0s"},e.style)):s.style.transition="all .8s"},e.moveDom),i=r("frame all success","frame-all-"+e.type,1),i.dom=s,i.doms={scroll:d,close:c,content:u,header:h,footer:f,main:g.$.id(e.id+"-main")},o&&t(i),setTimeout(function(){s.classList.remove("hidden")},50),i;i=r("frame dom is null","frame-dom-null"),o&&t(i),n()}location(e,t,n){function o(){if(!window.open)return a.alert("window.open is null"),0;let t=null;try{t=window.open("_blank"),t.location=e}catch(e){a.alert("浏览器禁用 window.open")}return t}function r(){return e===window.location.href?(window.location.reload(),!1):"open"===t.target?(o(e),!1):(window.location.href=e,!0)}var i=arguments.length>2;let a=this;if(!e)return!1;if(t=Object.assign({time:0,target:""},t),t.time<1)r();else if(i)var l=1*t.time,s=setInterval(function(){if(l<=0)return clearInterval(s),s=null,r(),!1;i&&n(l),l--},1e3)}tree(e,t,n){t=t||"id",n=n||"by";var o=[];if(!Array.isArray(e))return o;e.forEach(function(e){delete e.children});var r={};return e.forEach(function(e){r[e[t]]=e}),e.forEach(function(e){var t=r[e[n]];t?(t.children||(t.children=[])).push(e):o.push(e)}),o}focus(e){return 3===this.$obj(e,1)&&(e=this.$.dom(e)),e.blur?e.blur():this.$.dom("body").focus(),e}script(e,t,n){if(!e)return!1;var o=document.createElement("script");o.type="text/javascript",arguments.length>2?o.text=n:(o.async=!0,o.src=e),arguments.length>1&&(o.onload=t);var r=document.getElementsByTagName("script")[0];return r.parentNode.insertBefore(o,r),o=null,r=null,!0}hover(e,t,n){var o=arguments.length>1,r=arguments.length>2;if(3===this.$obj(e,1)&&(e=this.$.all(e)),!o)return e;if(e.length>=1)for(var i=0;i<e.length;i++)e[i].setAttribute("data-tab",i),e[i].onmouseenter=function(e){t({index:1*this.getAttribute("data-tab"),e:e,dom:this,type:"enter"})},e[i].onmousemove=function(e){t({index:1*this.getAttribute("data-tab"),e:e,dom:this,type:"move"})},r&&(e[i].onmouseleave=function(e){n({index:1*this.getAttribute("data-tab"),e:e,dom:this,type:"leave"})});else e.onmouseenter=function(e){t({index:0,e:e,dom:this})},r&&(e.onmouseleave=function(e){n({index:0,e:e,dom:this})})}tab(e,t,n){t=Object.assign({index:0,event:"click",list:"[data-tab-list]",nav:"[data-tab]"},t);var o=this;3===o.$obj(e,1)&&(e=o.$.dom(e));var r=Array.from(e.querySelectorAll(t.nav));r.length&&(o.class(r).name(""),r.forEach(function(e,t){e&&!o.js(e,0).attr("data-index")&&o.js(e,0).attr("data-index",t)}),"hover"===t.event&&o.hover(r,function(e){"enter"===e.type&&e.dom.click()}),o.click(r,function(e){var i=e.dom,a=o.js(i,0).attr("data-index");if(void 0===a&&(a=t.index),o.class(r).name(""),o.js(i,0).addClass("active"),o.focus(i),n&&n({index:1*a,that:i}),t.list){var l=o.$.all(t.list);l&&l.length&&(o.class(l).name(""),o.js(l[1*a],0).addClass("show"))}return""}),setTimeout(()=>{t.index<r.length&&r[1*t.index].click()},200))}move(e,t,n){if(n&&3===this.$obj(n,1)&&(n=this.$.dom(n)),3===this.$obj(e,1)&&(e=this.$.dom(e)),!e)return null;var o=n?n.clientWidth:window.innerWidth,r=n?n.clientHeight:window.innerHeight;e.onmousedown=function(n){var i=n||window.event,a=i.clientX-e.offsetLeft,l=i.clientY-e.offsetTop;void 0!==e.setCapture&&e.setCapture();var s=0,c=0;document.onmousemove=function(n){var i=n||window.event,u=i.clientX-a,d=i.clientY-l;u=u>o-e.offsetWidth?o-e.offsetWidth:u<0?0:u,d=d>r-e.offsetHeight?r-e.offsetHeight:d<0?0:d,s=u,c=d,t&&t({left:u+"px",top:d+"px",code:1})},document.onmouseup=function(){this.onmousemove=null,this.onmouseup=null,void 0!==e.releaseCapture&&e.releaseCapture(),t&&t({left:s,top:c,code:0}),s=null,c=null}}}array(e){var t=this;return e.length&&4===t.$obj(e,1)?{rand:function(){var n=t.copy(e);return n.sort(function(){return Math.random()-.5})},agg:function(t){var n={};return t?(e.forEach(function(e){var o=e[t];void 0!==o&&""!==o&&(n[o]?n[o].push(e):n[o]=[e])}),n):n},unique:function(t){if(arguments.length){var n=new Map;return e.filter(function(e){return!n.has(e[t])&&n.set(e[t],1)})}for(var o=[],r=0;r<e.length;r++)-1===o.indexOf(e[r])&&o.push(e[r]);return o},max:function(){return Math.max.apply(null,e)},min:function(){return Math.min.apply(null,e)},sort:function(n){return{reverse:function(){return n?e.sort(function(e,o){return 1===t.$obj(o[n],1)?o[n]-e[n]:o[n].localeCompare(e[n])}):e.sort(function(e,t){return e-t})},sort:function(){return n?e.sort(function(e,o){return 1===t.$obj(e[n],1)?e[n]-o[n]:e[n].localeCompare(o[n])}):e.sort(function(e,t){return t-e})}}},sum:function(t,n){return t=t||0,n=n||0,e.reduce(function(e,t){e+="",t+="";var o="0";e.indexOf(".")>=0&&(o=e),t.indexOf(".")>=0&&(o=t),e.indexOf(".")>=0&&t.indexOf(".")>=0&&(o=e.length>t.length?e:t);var r=0;o.indexOf(".")>=0&&(r=o.length-o.indexOf(".")-1,r=1*("1e"+r),e*=r,t*=r),e*=1,t*=1,r=r<1?1:r;var i=(e+t)/r;switch(n){case 1:i=(e-t)/r;break;case 2:i=e*t/r;break;case 3:i=e/t;break;case 4:i=e/r%(t/r)}return o=null,r=null,i},+t)},chunk:function(t,n){t=t||1,n=n||[];let o=e;if(t<=0)return n;for(;o.length;)n.push(o.splice(0,t));return n},obj:function(t,n){let o={};return e.forEach(e=>{void 0!==e[t]&&(o[e[t]]=e[n])}),o}}:{}}copy(e,t){if(""===e||null==e||NaN===e)return"";let n=e=>{let t;if("object"==typeof e)if(Array.isArray(e)){t=[];for(let o in e)t.push(n(e[o]))}else if(null===e)t=null;else if(e.constructor===RegExp)t=e;else{t={};for(let o in e)t[o]=n(e[o])}else t=e;return t};return t?n(e):JSON.parse(JSON.stringify(e))}font(e,t){e=e||1920;let n=window.innerWidth*(100/e);t&&(n=t),document.documentElement.style.fontSize=n+"px",this.font_em=!0}fonts(e,t){let n=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth;if(!n)return 100*e;t=t||1920;let o=n/t*100;return e*o}cssLazy(e){e=e||"css-lazy";var t=document.head.children,n=!1;if(t.length)for(var o=0;o<t.length;o++)t[o].id===e&&(n=!0);return{link:function(t){if(!t)return 0;if(!n){var o=document.createElement("link");o.setAttribute("rel","stylesheet"),o.setAttribute("id",e),o.setAttribute("href",t),document.getElementsByTagName("head")[0].appendChild(o),o=null}},text:function(t){if(!t)return 0;if(!n){var o=document.createElement("style");o.setAttribute("type","text/css"),o.setAttribute("id",e);try{o.appendChild(document.createTextNode(t))}catch(e){style.styleSheet.cssText=t}document.getElementsByTagName("head")[0].appendChild(o),o=null}}}}hash(e,t,n){function o(){if(r.is_hash)return 0;var o=setTimeout(()=>{clearTimeout(o),o=null,r.hash(t=>{e(t)},t,n)},200)}t=0===t?0:t||"",n=n||"";let r=this,i=window.location.hash;if(n)try{i=r.eval("return "+n)}catch(t){n="",i="",e({code:0,data:t+""})}i!=t&&(t=i,e({code:1,data:t})),o()}refresh(e){let t=this;t.loading_timer=null,t.alert_timer=null,t.resize_timer=null,t.timer_timer=null,t.jsonp_timer=null,t.down_timer=null,t.toast_timer=null,t.jsonp_timeout=8e3,t.is_hash=!1,t.is_cache=0;let n=t.$config.select("api");return n&&(t.options.api=n),t.options.scroll&&window.BScroll&&(t.$scroll=window.BScroll),t.options.ajax&&window.axios&&(t.$axios=window.axios),console.log("%c 欢迎使用！当前版本：%c"+t.version+"。%c 更新时间："+t.__TIME__,"color:tomato","color:green","color:orange"),t.options.debugger&&(console.log("%c 禁止调试！","color:orange"),setInterval(function(){var e=Date.now();return e},100)),e||console.log("%c 重置成功","color:#99cc33"),{option:t.options,scroll:t.$scroll||"",ajax:t.$axios||"",ver:t.version}}route(){function e(e,t,n,o){return{path:e,title:n||"",id:t||1,by:o||-1}}function t(e){i.js("title").html(e)}function n(e,n){let o=i.$routeConfig.now;o.path?(window.location.hash=o.path,t(o.title),r(t=>{e&&e(t)})):n&&n()}function o(e){if(e<=0)return{};let t=i.$routeConfig.path.filter(t=>t.id===e);return t.length?t[0]:{}}function r(e){let t=i.$routeConfig.now,n={lazy:t.path.replace(/\//g,"_"),params:t.params.join("&"),path:t.path,back:{},id:t.id,title:t.title,code:1};n.back=o(n.by),n.params=i.getUrl("?"+n.params);let r=i.$.all('script[src*="'+i.$routeConfig.prefix+'"]');if(r.length)for(let e=0;e<r.length;e++)i.remove(r[e]);i.script(i.$routeConfig.prefix+n.lazy+i.$routeConfig.suffix),i.$routeConfig.now=n,e(n),n=null}let i=this;return{create:function(e,t,n){if(4===i.$obj(e,1)&&e.length>0){let n=e.filter(e=>""!==e.path);return i.$routeConfig.path=i.array(n).unique("path"),i.$route.config(),t&&t(),1}return n&&n(),0},init:function(e){n(t=>{e&&e(t)},()=>{i.$route.push(window.location.hash||"/")})},push:function(e,n){let o=e.substr(1);o=o||"index",o=o.split("/");let a=o.filter(e=>e.indexOf("=")<0&&e).join("/"),l=i.$routeConfig.path.filter(e=>e.path===a);if(!l.length)return l=null,n?n({code:0,err:"错误路由"}):demo.alert("错误路由"),0;l=l[0],window.location.hash=l.path,t(l.title);let s=[];o=o.join("/").replace(a,"").split("/"),o.length>1&&(s=o.splice(1)),l.params=s,i.$routeConfig.now=l,l=null,r(e=>{n&&n(e)})},back:function(e){let t=(i.$routeConfig.now||{}).back||{};i.$routeConfig.now=t,n(t=>{e&&e(t)},()=>{window.history.go(-1)}),t=null},array:function(t){if(4===i.$obj(t,1)&&t.length>0){let n=t.map(t=>e(t[0],t[1],t[2],t[3]));return n}return[]},title:function(e){t(e)},reset:function(e,t,n){i.$route.create(e||[]),i.$route.config(t||{}),n&&n()},destroy:function(){i.$routeConfig={path:[],now:{},prefix:"",suffix:""}},config:function(e){e=e||{},i.$routeConfig.prefix=e.prefix||"./lazy/",i.$routeConfig.suffix=e.suffix||".base.js?v="+Date.now()}}}lazy(){let e=this;return{page:function(t,n,o){3===e.$obj(t,1)&&(t=e.js(t).dom()),e.js(t,0).html(""),n=Object.assign({vue:!0,id:"lazy-"+Date.now(),class:"app_view",html:"html",style:"",link:"",suffix:".base.css?v="+Date.now(),prefix:""},n);var r=e._div("div",n.class);r.setAttribute("id",n.id),n.vue&&r.setAttribute("v-clock",""),r.innerHTML=n.html,n.style&&e.cssLazy("css-text-"+n.id).text(n.style),n.link&&(4===e.$obj(n.link,1)?n.link.length&&n.link.forEach((t,o)=>{e.cssLazy("css-link-"+n.id+"-"+o).link(n.prefix+t.replace(/\.css/,"")+n.suffix)}):e.cssLazy("css-link-"+n.id).link(n.prefix+n.link.replace(/\.css/,"")+n.suffix)),t.appendChild(r),o&&o()},image:function(t){t=t||"img";let n=e.$.all(t),o=n.length,r=document.documentElement.clientHeight,i=document.documentElement.scrollTop||document.body.scrollTop;for(let e=0;e<o;e++){let t=n[e].offsetTop;if(t<r+i){let t=n[e].dataset.src;n[e].src=t}}},scroll:function(e){let t=document.documentElement,n=t.clientHeight,o=t.scrollTop,r=t.scrollHeight;n+o>=r&&e&&e()},bulk:function(t,n,o,r,i,a,l){return i=i||"li",a=a||"",window.requestAnimationFrame&&document.createDocumentFragment?arguments.length<4||5!==e.$obj(arguments[3],1)?"传入正确参数":void setTimeout(()=>{function s(){let t=document.createDocumentFragment();for(let n=0;n<d;n++){f++;let n=e._div(i,a),o=r(f,m,h);o&&(n.innerHTML=o,t.appendChild(n)),n.setAttribute("data-bulk-id",f)}p.appendChild(t),m+=1,c()}function c(){if(m<h){if(m+1===h){let e=u%d;d=e>0?e:d}window.requestAnimationFrame(s)}else l&&l(Array.from(p.querySelectorAll("[data-bulk-id]")))}let u=t||100,d=n||20,f=0,h=Math.ceil(u/d),m=0,p=o;3===e.$obj(o,1)&&(p=e.$.dom(o)),c()},0):"不支持"}}}debounce(e,t){let n=null;return function(){null!==n&&clearTimeout(n),n=setTimeout(()=>{e.apply(this,arguments)},t)}}throttle(e,t){let n=Date.now();return function(){let o=this,r=arguments,i=Date.now();i-n>=t&&(e.apply(o,r),n=Date.now())}}access(e,t,n){let o="接入成功";return this[e]?(o="该方法已存在",n&&n({c:!1,m:o}),o):(this[e]=t,n&&n({c:!0,m:o}),o)}ctrl(){let e=this,t="position: fixed;left: -100vw;top: -100vh;z-index: -1000";return{c:function(n,o){let r=o,i=document.execCommand("copy");if(!i)return e.alert("不支持"),0;if(n)try{3===e.$obj(n,1)&&(n=e.$.dom(n)),r=n.getAttribute("data-copy")||""}catch(e){r=""}let a=e._div("textarea"),l="copy-"+Date.now()+"-"+e.rand(6);return a.value=r||"copy",a.setAttribute("id",l),a.setAttribute("style",t),
e.$.dom("body").appendChild(a),a.select(),document.execCommand("copy"),setTimeout(()=>{e.remove(a)},300),1},r:function(t,n,o){function r(){u&&(clearTimeout(u),u=null)}if(3===e.$obj(t,1)&&(t=e.$.dom(t)),n=Object.assign({item:[]},n),!n.item.length)return t.oncontextmenu=function(){return o&&o({type:"right"}),!1},1;let i=e._div("div",e.options.prefix+"_right"),a=n.item.length>6?"scroll":"";n.id=n.id||"right-menu-"+Date.now()+"-"+e.rand(6),i.setAttribute("id",n.id);let l='<i class="close fa fa-close"></i><i class="before fa fa-hand-o-up"></i><div class="tab '+a+'"><ul>';n.item.forEach((e,t)=>{l+='<li><span title="'+e.text+'" data-index="'+t+'">'+e.text+"</span></li>"}),l+="</ul></div>",i.innerHTML=l,e.$.dom("body").appendChild(i);let s="#"+n.id,c=null,u=null,d=n.timeout||3e3;d=d<100?100:d,a&&(c=e.scroll(s+" .tab",{})),e.click(s+" .close",()=>{r(),e.js(s).style({opacity:0})}),e.click(e.$.all(s+" .tab li span"),t=>{let r=t.dom.getAttribute("data-index"),i={data:e.copy(n.item[1*r]),type:"click",scroll:c,res:t,leave:d};i.data.callback&&delete i.data.callback,n.item[r].callback?n.item[r].callback(i):o&&o(i),e.click(s+" .close"),i=null}),t.oncontextmenu=function(t){return e.js(s).style({left:t.clientX+"px",top:t.clientY+"px"}),!1},e.$.dom(s).oncontextmenu=function(){return!1},e.hover(s,()=>{r()},()=>{r(),u=setTimeout(()=>{e.click(s+" .close")},d)})},d:function(t,n){let o=(3===e.$obj(t,1)?t.split(","):t)||[],r=[];o.length&&(r=o.map(e=>{let t=(e+"").split("-"),n={c:"c"===t[0],s:"s"===t[0]};return n.key=t[1]||t[0],n})),o.indexOf("right")>=0&&(document.oncontextmenu=function(){return!1}),document.onkeydown=function(e){let t=e.key.toLowerCase(),i=r.filter(n=>n.key.toLowerCase()===t&&e.ctrlKey===n.c&&e.shiftKey===n.s);if(o.indexOf("f12")>=0&&e.ctrlKey&&e.shiftKey&&"i"===t)return n&&n({key:"f12"}),!1;if(i.length){if(i=i[0],e.ctrlKey===i.c&&t===i.key&&!i.s)return n&&n(i),!1;if(e.shiftKey===i.s&&!i.cal&&t===i.key)return n&&n(i),!1}return!0}},k:function(n,o,r){3===e.$obj(n,1)&&(n=e.$.dom(n));let i="ctrl-k-input-keydown";var a=function(e,t,n){return{code:t,key:e,val:n}};e.js(n,0).click(n=>{e.$.id(i)&&e.js("#"+i).remove();let l=e._div("input","m_inp");l.setAttribute("id",i),l.setAttribute("style",t),l.setAttribute("autocomplete","off"),n.appendChild(l),l.focus();let s=[];l.onkeydown=function(e){let t={};if(!e.shiftKey&&!e.ctrlKey){let n=e.keyCode;switch(n){case 38:case 87:case 104:t=a("up",0,n);break;case 39:case 68:case 102:t=a("right",1,n);break;case 40:case 83:case 98:t=a("bottom",2,n);break;case 37:case 65:case 100:t=a("left",3,n);break;default:t=a(e.key,4,n)}}l.value="",r&&(t.event=e,s.push(t.key),t.his=s),o&&o(t),t=null}})}}}algorithm(){let e=this;return{rgb:function(t,n){return t=t||0,n=n||255,"rgb("+e.rand(t,n)+","+e.rand(t,n)+","+e.rand(t,n)+")"},rgba:function(t,n,o){return n=n||0,o=o||255,t=t||.1,"rgba("+e.rand(n,o)+","+e.rand(n,o)+","+e.rand(n,o)+","+t+")"},color:function(){return"#"+("00000"+(16777216*Math.random()<<0).toString(16)).substr(-6)},gradients:function(...t){let n=t[0],o=t;return 1===e.$obj(n,1)?o=o.splice(1):n=0,o=o.filter(t=>3===e.$obj(t,1)&&""!==t),o.length<2&&(o=[e.algorithm().rgb(),e.algorithm().rgb()]),o=o.join(","),"linear-gradient("+n+"deg,"+o+")"}}}cookie(){let e=this,t=function(t){return e.options.prefix+"_"+t},n=function(e){return e?e.replace(t(""),""):""};return{set:function(n,o,r){r=r||"d7";let i=r.substr(0,1),a=r.substr(1);a=isNaN(a)?7:1*a;let l=1e3*("d"===i?86400:"h"===i?3600:1)*a,s=new Date;return s.setTime(s.getTime()+l),7!==e.$obj(n,1)&&7!==e.$obj(o,1)&&(document.cookie=t(n)+"="+escape(o)+";expires="+s.toGMTString()),i=null,a=null,l=null,s=null,!0},get:function(o,r){let i=e.cookie().getter(o);if(r)return i;let a=e.$obj(i,1);return 6===a?i.key=n(i.key):4===a&&(i=i.filter(e=>0===e.key.indexOf(t(""))),i=i.map(e=>(e.key=n(e.key),e))),i},getter:function(n){let o=document.cookie||"";return o=o.split(";"),o.length?(o=o.map(e=>{let t=e.split("=");return{key:t[0].trim(),val:unescape(t[1])}}),o=o.filter(e=>""!==e.key),3===e.$obj(n,1)?(o=o.filter(e=>e.key===t(n)),o[0]||{}):o):[]},del:function(n){let o=new Date;o.setTime(o.getTime()-1);let r=e.cookie().getter(n).val;return null!=r&&(document.cookie=t(n)+"="+escape(r)+";expires="+o.toGMTString()),o=null,r=null,!0},clear:function(){let o=e.cookie().getter();return o.length&&(o=o.filter(e=>0===e.key.indexOf(t(""))),o.length&&o.forEach(t=>{e.cookie().del(n(t.key))})),o=null,!0}}}sizeof(e,t){var n,o,r,i=0;if(t=t?t.toLowerCase():"","utf-16"===t||"utf16"===t)for(o=0,r=e.length;o<r;o++)n=e.charCodeAt(o),i+=n<=65535?2:4;else for(o=0,r=e.length;o<r;o++)n=e.charCodeAt(o),i+=n<=127?1:n<=2047?2:n<=65535?3:4;return i}cache(){let e=this,t="cache_",n=5033164.8,o=["$session","$local"],r=function(n){return e.options.prefix+"_"+t+n},i=function(t){return e.sizeof(t)<n},a=function(t,n){e[o[e.is_cache]].set(t,n)},l=function(t){let n=e[o[e.is_cache]].get(r(t));return 7!==e.$obj(n,1)&&""!==n&&n};return{set:function(t,n){return n+="",i(n)&&3===e.$obj(n,1)?!1!==l(t)?0:(a(r(t),n),1):0},edit:function(t,n){return n+="",!1===l(t)?0:i(n)&&3===e.$obj(n,1)?(a(r(t),n),1):0},get:function(e){return l(e)},del:function(t){return!1===l(t)?0:(e[o[e.is_cache]].clear(r(t)),1)},name:function(e){return{key:r(e),val:l(e)}},cut:function(t){e.is_cache=1*!!t}}}log(e,t){if(!this.options.log)return e;switch(t){case 1:console.group(e);break;case 2:console.groupCollapsed(e);break;case 3:console.groupEnd();break;case 4:console.warn(e);break;case 5:console.error(e);break;case 6:e=Object.assign({text:"log",sty:"color:orange"},e||{}),console.log("%c "+e.text,e.sty),e=e.text;break;default:console.log(e)}return this}status(){let e=this,t=function(t){return(e.options.prefix+"status"+t).toUpperCase()},n=function(n){return e.$session.get(t(n))||{}},o=function(n,o){e.$session.set(t(n),o)},r=function(t,r,i){let a=n(t);return e.$obj(i,1)<7&&(a[r]=i,o(t,a)),a[r]||""},i=function(e,t){if(a[e])return 0;a[e]=function(n,o){return r(e,n,o)||t}},a={page:function(e,t){return r("page",e,t)||1},status:function(e,t){return r("status",e,t)||{}},code:function(e,t){return r("code",e,t)||400},add:function(e,t){i(e,t||"")}};return a}const(e,t){if(this[e])return!1;try{Object.defineProperty(this,e,{enumerable:!0,value:t,configurable:!1,writable:!1})}catch(e){console.log(e+"")}}plugIn(){let e=this,t=e.options.prefix+"_plugins",n=t=>{e.ajax(e.__DEMO_API__).plain({send:t,type:"plugins"},t=>{let n=JSON.parse(t);n.code&&n.data.forEach(t=>{if(e[t.name]&&e[t.name]())return 1;e.script(t.url,()=>{e.access(t.name,e.fn(t.fn),e=>{e.c&&o(t.name)}),e.js("script").remove()})})},!0)},o=n=>{let o=e.$config.select(t)||[];o.indexOf(n)<0&&o.push(n),e.$config.edit(t,o)};return{add:function(o,r,i){let a=e.$config.select(t)||[];4===e.$obj(o,1)?(n(o.join(",")),a=a.concat(o)):(n(o),a=a.concat(o.split(",")));let l=e.array(a).unique();e.$config.edit(t,l);let s=()=>{try{r&&r(l)}catch(e){i&&i(e+""),setTimeout(()=>{s()},500)}};s()},del:function(n){let o=e.$config.select(t)||[];4===e.$obj(n,1)?n.forEach(e=>{o=o.filter(t=>t!==e)}):o=o.filter(e=>e!==n),e.$config.edit(t,o)},init:function(){let o=e.options.plugins.concat(e.$config.select(t)||[]);e.$config.add(t,o),o.length&&n(o.join(","))}}}toast(e,t){let n=this,o=n.options.prefix+"_toast",r=n.$.dom("."+o),i=n.$obj(e,1),a=isNaN(t)?3e3:t<1e3?1e3:+t,l=t=>{4===i||6===i?n.js(t,0).json(e):t.innerHTML=e},s=t=>{0===n.$web?n.class(t).add("pc"):n.font_em&&n.class(t).add("em"),n.class(t).add("show"),null!==n.toast_timer?(clearTimeout(n.toast_timer),c(t)):c(t),t.onclick=(t=>{let o=e;4!==i&&6!==i||(o=JSON.stringify(e)),n.ctrl().c("",o),n.log("copy success",1).log(o,0).log("",3),n.stopBubble(t)})},c=e=>{n.toast_timer=setTimeout(()=>{n.class(e).remove("show"),clearTimeout(n.toast_timer),n.toast_timer=null},a)};if(r)l(r),s(r);else{let e=n._div("div",o);l(e),n.js("body").appendChild(e),s(e)}}stopBubble(e){e&&e.stopPropagation?e.stopPropagation():window.event.cancelBubble=!0}stopDefault(e){return e&&e.preventDefault?e.preventDefault():window.event.returnValue=!1,!1}delay(e,t){e=this.copy(Object.assign({timeout:5,name:"delay",type:"get",item:""},e||{}));let n=this.options.prefix+"-delay-"+e.name,o=Date.now(),r=this.$local.get(n)||{};"set"===e.type?(r.item=e.item,r.time=o,this.$local.set(n,r),t&&t({code:0,data:r.item})):!r.time||+r.time-6e4*e.timeout>o?(this.$local.clear(n),t&&t({code:1,data:r})):t&&t({code:0,data:r.item})}prompt(e,t,n,o){let r=this,i=r.options.prefix+"_prompt";if(e=e||"请输入",n=n||e,o||(o=function(e){return""!==e}),!r.$.id(i)){let n=r._div("div",i);n.setAttribute("id",i),n.innerHTML='<p data-head></p><div data-main><input type="text" class="m_inp small"></div><div data-foot><button class="m_btn small" data-close>取消</button><button class="m_btn small" data-submit>确定</button></div>',document.body.appendChild(n),r.js("#"+i+" [data-submit]").click(()=>{let n=r.js("#"+i).find("input").value;o(n)?(t&&t(n),a(),r.js("#"+i).find("input").value=""):r.toast(e)}),r.js("#"+i+" [data-close]").click(()=>{a()})}let a=e=>{r.js("#"+i)[e?"addClass":"removeClass"]("show")};setTimeout(()=>{a(!0)},200),r.js("#"+i+" [data-head]").html(n);let l=r.js("#"+i).find("input");l.setAttribute("placeholder",e),l.focus(),l.onkeydown=function(e){13===e.keyCode&&r.js("#"+i+" [data-submit]").click()}}title(e){this.js("title").html(e||"title")}countTo(e,t,n,o){if(n=n||0,o=o||300,isNaN(e))return t&&t(e),e;let r=e-(isNaN(o)?300:+o);r=r>0?r:0;let i=o=>{if(o>e)return 0;let r=setTimeout(()=>{t&&t(o),o++,clearTimeout(r),i(o)},isNaN(n)?0:+n)};i(r)}random(){let e=this,t=(t,n)=>{t=isNaN(t)?Math.random():t,n=isNaN(n)?Math.random():n;let o="qwertyuiopasdfghjklzxcvbnm",r="0123456789",i=t>.5?o.charAt(e.rand(0,o.length-1)):r.charAt(e.rand(0,r.length-1));return n>.5?i.toUpperCase():i.toLowerCase()},n=e=>{e=isNaN(e)?6:e,e=e<1?1:e;let n=t(1);for(let o=0;o<e-1;o++)n+=t();return n},o=(t,r)=>{let i=t||n(),a=e.$obj(e.fictitious[i],1);return 7===a?(e.fictitious[i]=0,i):1===a?(r?e.fictitious[i]=0:e.fictitious[i]++,i):o()};return{mock:t,vars:n,produce:o}}clickMore(e,t,n,o,r){let i=this;n=isNaN(n)?1:n<1?1:n,o=isNaN(o)?-1e3:o;let a=i.random().produce(e);if(n<=i.fictitious[a])return t&&t(!0,0),i.fictitious[a]=o||0,0;if(r)return 0;let l=i.fictitious[a];l=l<=0?-1*l+n:n-l,t&&t(!1,l)}mouseWheel(e,t,n){let o=this,r=t||500;n=n||"wheel_timer",r=r<10?10:isNaN(r)?10:+r,o.access(n,null);let i=(t,i)=>{o._timers(n,n=>{1===n&&e&&e({err:t,type:i})},1,r)};var a=function(e){e=e||window.event,e.wheelDelta?(e.wheelDelta>0&&i("上",0),e.wheelDelta<0&&i("下",1)):e.detail&&(e.detail>0&&i("上",0),e.detail<0&&i("下",1))};document.addEventListener&&document.addEventListener("DOMMouseScroll",a,!1),window.onmousewheel=document.onmousewheel=a}styleToObj(e){function t(e,t){var n;return n=e.replace(/(^\s+)|(\s+$)/g,""),t&&"g"===t.toLowerCase()&&(n=n.replace(/\s/g,"")),n}if(!e||""===e)return;var n=e.split(";");n=n.filter(e=>""!==e);let o="";return n.forEach(e=>{let n="";t(e).split(":").forEach(e=>{n+='"'+t(e)+'":'}),o+=n+","}),o=o.replace(/:,/g,","),o=o.substring(0,o.lastIndexOf(",")),o="{"+o+"}",JSON.parse(o)}_init(e){let t=this;t.$obj=((e,n)=>{let o=t._is_obj(e);return n?o.code:o}),t.$model=t._model(),t.$fixed=t._fixed(),t.$web=t.platform(),t.$local=t.local(),t.$session=t.session(),t.route().destroy(),t.$route=t.route(),t.$lazy=t.lazy(),t.$ctrl=t.ctrl(),t.$alg=t.algorithm(),t.$config=t._config(),t.$cookie=t.cookie(),t.$cache=t.cache(),t.$save=t.status(),t.$random=t.random(),t.const("__DEMO__","http://148.70.132.221:1996/"),t.const("__DEMO_API__",t.__DEMO__+"api/"),t.const("__TIME__","2022-01-05 15:00:00"),t.$plug=t.plugIn(),t.$plug.init(),t.font_em=!1,t.fictitious={},delete t.$plug.init,t.options.const.length&&t.options.const.forEach(e=>{t.const(e,null)}),e(t.refresh(1))}_fixed(){var e=this;return{bgc(t,n){if(n=n||"body",3===e.$obj(n,1)&&(n=e.$.dom(n)),6===e.$obj(t,1)){var o="";for(var r in t)o+=`${r}:${t[r]};`}else t=t.replace("background:",""),o="background:"+t;if(n){var i=e.options.prefix+"_fixed";e.$.dom("."+i)&&e.js("."+i).remove();var a=e._div("div",i);a.setAttribute("style",o),n.appendChild(a),a=null}},image(t,n){if(n=n||"body",3===e.$obj(n,1)&&(n=e.$.dom(n)),n){var o=e.options.prefix+"_fixed";e.$.dom("."+o)&&e.remove("."+o);var r=e._div("div",o);r.setAttribute("style","background:url('"+t+"') no-repeat 0 0 transparent scroll;background-size:100% 100%"),n.appendChild(r),r=null}},gray(t){let n="css-lazy-gray";if(t)try{e.js('style[id="'+n+'"]').remove()}catch(e){}else e.cssLazy(n).text("html{filter:grayscale(1);}")}}}_model(){var e=this;return{success(t,n){e.alert(t,1,{title:n})},error(t,n){e.alert(t,0,{title:n})},warning(t,n){e.alert(t,2,{title:n})},model(t,n,o,r){var i=arguments.length;r=void 0===r?3:r,e.alert(n,r,{title:t,sty:"model",timeout:0},function(e){i>2&&(e.time=Date.now(),o(e))})},popup(t,n,o){e.alert(t,3,{sty:"model",timeout:0,screen:!!o},function(t){3e3===t.code?e.js(t.box,0).addClass("popup"):n&&n(t)})},info(t,n,o){o=o||0,n=void 0===n?1:n,e.alert(t,n,{timeout:o})}}}_timers(e,t,n=1,o){var r=this;null!==r[e]&&n&&(clearTimeout(r[e]),r[e]=null),t(0),r[e]=setTimeout(function(){clearTimeout(r[e]),r[e]=null,t(1)},o||500)}_storage(e){function t(){var t=window[e].getItem(i)||"{}";try{t=JSON.parse(t)}catch(e){t={}}return t}function n(t){return t?(window[e].setItem(i,JSON.stringify(t)),t):0}function o(e,t){var n=l.$obj(a[e],1);return n>6||5===n?t:a[e]}function r(){a=t()}var i=(this.options.name+"storage"+this.version.replace(/\./g,"")+window.location.port).toUpperCase(),a=t(),l=this;return{all:function(){return r(),a},get:function(e,t=""){return r(),o(e,t)},set:function(e,t){return e||(e=l.options.prefix+"-null"),r(),a[e]=t,n(a)},clear:function(e){return r(),4===l.$obj(e,1)&&e.length?e.forEach(function(e){a[e]=null,delete a[e]}):(a[e]=null,delete a[e]),n(a)},reset:function(){return n({})}}}_style(e,t){if(6===this.$obj(t,1))for(var n in t)e.style[n]=t[n]}_config(){function e(e){return 7===n.$obj(o[e],1)}function t(e){return 3===n.$obj(e,1)}let n=this,o=n.$local.get("config",{});return{delete:function(t){return e(t)?0:(delete o[t],n.$local.set("config",o),1)},add:function(r,i){return t(r)&&e(r)?(o[r]=i,n.$local.set("config",o),1):0},edit:function(r,i){return t(r)&&!e(r)?(o[r]=i,n.$local.set("config",o),1):0},select:function(n){return e(n)?t(n)?"":o:o[n]},switch(e,t,o){let r=n._config()[e];return"switch"!==e&&r?r(t,o):0}}}_is_obj(e){var t=0,n="";switch(Object.prototype.toString.call(e)){case"[object Number]":t=1,n="number";break;case"[object Boolean]":t=2,n="boolean";break;case"[object String]":t=3,n="string";break;case"[object Array]":t=4,n="array";break;case"[object Function]":t=5,n="function";break;case"[object Object]":t=6,n="object";break;case"[object Undefined]":t=7,n="undefined";break;case"[object Null]":t=8,n="null"}return{code:t,type:n}}_div(e,t,n){var o=document.createElement(e||"div"),r=this.$obj(n,1);return 7!==r&&(4!==r&&6!==r||(n=JSON.stringify(n)),o.appendChild(document.createTextNode(n))),r=null,o.setAttribute("class",t||""),o}}(function(){if(!window.demo)window.demo=new Demo})();